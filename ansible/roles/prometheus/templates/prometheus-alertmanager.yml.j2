global:
  resolve_timeout: 5m
  smtp_require_tls: true
route:
  receiver: default-receiver
  group_wait: 10s
  group_interval: 5m
  repeat_interval: 3h
{% if enable_prometheus_jiralert | bool or enable_prometheus_msteams | bool %}
  routes:
{% endif %}
{% if enable_prometheus_jiralert | bool %}
    - receiver: 'jira'
{% endif %}
{% if enable_prometheus_msteams | bool %}
    - receiver: 'prometheus-msteams'
{% endif %}
receivers:
  - name: default-receiver
{% if enable_vitrage | bool and enable_vitrage_prometheus_datasource | bool %}
    webhook_configs:
      - send_resolved: true
        url: '{{ vitrage_public_endpoint }}/v1/event'
        http_config:
          basic_auth:
            username: '{{ keystone_admin_user }}'
            password: '{{ keystone_admin_password }}'
{% endif %}
{% if enable_prometheus_jiralert | bool %}
  - name: 'jira'
    webhook_configs:
    - url: 'http://localhost:{{ prometheus_jiralert_port }}/alert'
{% endif %}
{% if enable_prometheus_msteams | bool %}
  - name: 'prometheus-msteams'
    webhook_configs:
    - send_resolved: true
      url: 'http://{{ api_interface_address | put_address_in_context('url') }}:{{ prometheus_msteams_port }}/alertmanager'
{% endif %}
templates: []
